{% from "_template.html" import insert_pickadate %}
{% extends "_template.html" %}
{% block title %} Roadmap: {{ title }} {% endblock %}

{% block navbar %}
<div class="col s12">
    <a href="{{ url('roadmaps') }}" class="breadcrumb">Roadmaps</a>
    <a href="{{ url('roadmap', args=[id]) }}" class="breadcrumb">{{ title }}</a>
    <ul class="right">
        <a href="{{ url('roadmaps') }}" id="delete_btn" class="btn-flat waves-effect white-text">Delete</a>
    </ul>
</div>
{% endblock %}

{% block content %}
    <div class="row">
        <form action="{{ url('roadmap', args=[id]) }}" method="POST" class="col s12">
            {{ csrf_input }}
            <div class="input-field">
                <input placeholder="Title" id="title" name="title" type="text" required>
                <label for="title">Title</label>
            </div>
            <div class="input-field">
                <input type="date" id="estimate" name="estimate" class="datepicker" required
                {% if ready %} disabled {% endif %}>
                <label for="estimate">Estimate</label>
            </div>
            <button id="submit_btn" type="submit"
                class="btn waves-effect waves-light deep-orange accent-2 right disabled">
                Add task
            </button>
        </form>
    </div>
    <div class="collection">
    {% for t in tasks %}
        <a href="{{ url('task', args=[id, t.id]) }}"
        {% if t.ready %}
        class="collection-item light-blue-text text-darken-4 green lighten-4"
        {% elif t.is_failed %}
        class="collection-item light-blue-text text-darken-4 red lighten-4"
        {% else %}
        class="collection-item light-blue-text text-darken-4"
        {% endif %}
        >{{ t.title }}</a>
    {% endfor %}
    </div>
{% endblock %}

{% block scripts %}
{{ super() }}
{{ insert_pickadate() }}
{% endblock %}
